{% extends 'base.html' %}

{% block title %}Chat{% endblock %}

{% block content %}
    <h1>Chat</h1>
    <div id="chat-box">
        {% for question in questions %}
            <div class="message assistant">
                <p>{{ question.content }}</p>
            </div>
            {% for answer in answers %}
                {% if answer.question_id == question.id %}
                    <div class="message user">
                        <p>{{ answer.content }}</p>
                    </div>
                {% endif %}
            {% endfor %}
        {% endfor %}
    </div>
    {% if not flask_session.get('finished') %}
        <form action="{{ url_for('main.chat') }}" method="post">
            <input type="hidden" name="question_id" value="{{ questions[-1].id }}">
            <input type="text" name="answer" required>
            <button type="submit">Send</button>
        </form>
    {% else %}
        <p>{{ questions[-1].content }}</p>
        <form method="get" action="{{ url_for('main.result') }}">
            <button type="submit">See Score</button>
        </form>
    {% endif %}
    <form method="post" action="{{ url_for('main.restart') }}">
        <button type="submit">Restart</button>
    </form>
{% endblock %}
