{% extends 'base.html' %}

{% block title %}Chat{% endblock %}

{% block content %}
    <h1>Chat</h1>
    <div id="chat-box">
        {% for question in questions %}
            <div class="message assistant">
                <p>{{ question.content }}</p>
            </div>
            {% for answer in answers %}
                {% if answer.question_id == question.id %}
                    <div class="message user">
                        <p>{{ answer.content }}</p>
                    </div>
                {% endif %}
            {% endfor %}
        {% endfor %}
    </div>
    {% if questions and questions|length < max_questions %}
        <form action="{{ url_for('main.continue_chat') }}" method="post">
            <input type="hidden" name="question_id" value="{{ questions[-1].id }}">
            <input type="text" name="answer" required>
            <button type="submit">Send</button>
        </form>
    {% else %}
        <p>The maximum number of questions has been reached. Please see your result.</p>
    {% endif %}
    <form method="post" action="{{ url_for('main.start_chat') }}">
        <button type="submit">Start</button>
    </form>
    <form method="post" action="{{ url_for('main.restart') }}">
        <button type="submit">Restart</button>
    </form>
{% endblock %}
